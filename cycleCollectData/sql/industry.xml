<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <property>
        <name>queryMeter</name>
        <value>
            SELECT
            a.meter_id AS meterId,
            a.dtu_num AS dtuNum,
            a.dtu_inner_addr AS dtuInnerAddr,
            c.account AS accessAccount,
            c. PASSWORD AS accessPassword
            FROM
            e_bas_meter a
            JOIN e_bas_architecture b ON a.arch_id = b.arch_id
            JOIN e_bas_dtu_account c ON b.tenant_Id = c.tenant_id
        </value>
        <description>
            获取所有的meter相关信息
        </description>
    </property>

    <property>
        <name>queryMeterRegConf</name>
        <value>
            SELECT
            a.meter_id as meterId,
            a.meter_name as meterName,
            b.type_id as typeId,
            b.type_name as typeName,
            c.index_id as indexId,
            c.index_name as indexName,
            d.reg_addr as regAddr
            FROM
            e_bas_meter a
            JOIN e_bas_meter_type b ON a.meter_type_id = b.type_id
            JOIN e_bas_meter_index c ON b.type_id = c.meter_type_id
            JOIN e_bas_index_conf d ON c.index_id = d.index_id
        </value>
        <description>
            获取所有的meter的寄存器信息
        </description>
    </property>

    <property>
        <name>countReg</name>
        <value>
            SELECT
            a.meter_id as meterId,
            count(*) as regCount
            FROM
            e_bas_meter a
            JOIN e_bas_meter_type b ON a.meter_type_id = b.type_id
            JOIN e_bas_meter_index c ON b.type_id = c.meter_type_id
            JOIN e_bas_index_conf d ON c.index_id = d.index_id
            GROUP BY a.meter_id
        </value>
        <description>
            统计每个meter的寄存器数
        </description>
    </property>

    <property>
        <name>queryRegAddrStart</name>
        <value>
            SELECT
            a.meter_id as meterId,
            MIN(d.reg_addr) as regAddrStart
            FROM
            e_bas_meter a
            JOIN e_bas_meter_type b ON a.meter_type_id = b.type_id
            JOIN e_bas_meter_index c ON b.type_id = c.meter_type_id
            JOIN e_bas_index_conf d ON c.index_id = d.index_id
            GROUP BY a.meter_id
        </value>
        <description>
            统计每个meter的寄存器起始地址
        </description>
    </property>
</configuration>